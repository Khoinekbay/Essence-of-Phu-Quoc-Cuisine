<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bún Quậy - Tinh Hoa Đảo Ngọc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ocean-blue': '#006994',
                        'sand-gold': '#C2B280',
                        'tropical-green': '#2E8B57',
                        'ocean-charcoal': '#1a202c',
                    },
                    fontFamily: {
                        'playfair': ['"Playfair Display"', 'serif'],
                        'quicksand': ['"Quicksand"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 font-quicksand" data-music="https://cdn.pixabay.com/audio/2023/01/01/audio_8162594411.mp3">

    <!-- Navigation -->
    <nav id="navbar" class="fixed w-full z-50 py-4 transition-all duration-300">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="../index.html" class="text-2xl font-playfair font-bold text-white tracking-widest uppercase drop-shadow-md">
                <i class="fas fa-arrow-left mr-2"></i> <span>Trở về</span>
            </a>
            <a href="https://engsub-essence-of-phu-quoc-cuisine.vercel.app/" class="text-white border border-sand-gold px-4 py-2 rounded-full hover:bg-sand-gold hover:text-ocean-charcoal transition-colors font-medium text-sm drop-shadow-sm">ENGSUB</a>
        </div>
    </nav>

    <!-- Parallax Hero Section with 8. Steam Animation -->
    <header class="relative h-[70vh] flex items-center justify-center overflow-hidden bg-gray-900">
        <div class="absolute inset-0 z-0">
             <!-- Replaced broken FB link with Cloudinary image -->
             <img src="https://res.cloudinary.com/dlbrm4bzk/image/upload/v1764229504/277e0ec9-1b18-480e-9621-d5b384be97af.png" 
                  alt="Bún Quậy Background" 
                  class="parallax-bg w-full h-full object-cover"
                  data-speed="0.5">
            <div class="absolute inset-0 bg-black/50"></div>
            
            <!-- Steam Effect Container -->
            <div class="steam-container z-10 opacity-70">
                <div class="steam" style="left: 45%; animation-delay: 0s;"></div>
                <div class="steam" style="left: 50%; animation-delay: 1s;"></div>
                <div class="steam" style="left: 55%; animation-delay: 2s;"></div>
            </div>
        </div>
        <div class="relative z-20 text-center text-white px-4 animate-fade-in-up">
            <h1 class="text-5xl md:text-7xl font-playfair font-bold mb-4 drop-shadow-lg">Bún Quậy</h1>
            <p class="text-xl md:text-2xl font-light italic text-sand-gold">"Chưa ăn chưa tới Phú Quốc"</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
            
            <!-- Left: Description -->
            <div class="fade-in-section" data-animation="slide-right">
                <h2 class="text-3xl font-playfair font-bold text-ocean-charcoal mb-6 border-l-4 border-sand-gold pl-4">Câu Chuyện Bún Quậy</h2>
                
                <div class="prose text-gray-600 mb-6">
                    <p class="mb-4 text-lg">
                        Bún quậy không chỉ là món ăn, đó là một trải nghiệm mang tính "nghi thức". Xuất phát từ món <strong>bún tôm Bình Định</strong>, món ăn này theo chân gia đình Kiến Xây di cư vào Phú Quốc từ những năm <strong>1995</strong>.
                    </p>
                    <p class="mb-4">
                        Cái tên "Bún quậy" ra đời từ hành động thực khách phải tự tay "quậy" hỗn hợp nước chấm (gồm tắc, đường, ớt, muối, bột ngọt) cho đến khi sánh lại và chuyển màu cam sữa đặc trưng. Một trải nghiệm "tự phục vụ" độc đáo tạo nên không khí nhộn nhịp khó quên.
                    </p>
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-ocean-blue my-6">
                        <h4 class="font-bold text-ocean-blue mb-2">Giá Trị Cốt Lõi: Sự Tươi Mới (Freshness)</h4>
                        <p class="text-sm italic">
                            "Khác với bún thông thường, sợi bún quậy được làm từ bột gạo ngâm mềm, xay nhuyễn, ép thành sợi và <strong>luộc ngay trong nồi nước sôi</strong> trước mặt thực khách. Nước luộc bún (nước cơm) ngọt thanh hòa quyện cùng chả tôm, chả cá quết tươi giòn sần sật."
                        </p>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md border-t-2 border-ocean-blue mt-8">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-xl text-ocean-blue"><i class="fas fa-info-circle mr-2"></i> Thông Tin 2025</h3>
                        <span class="bg-sand-gold text-white px-3 py-1 rounded-full text-xs font-bold">Cập nhật</span>
                    </div>
                    <ul class="space-y-3 text-gray-700">
                        <li class="flex justify-between border-b pb-2">
                            <span><i class="fas fa-tag text-sand-gold mr-2"></i> Giá tham khảo:</span>
                            <span class="font-bold">40.000đ - 75.000đ/tô</span>
                        </li>
                        <li><i class="fas fa-map-pin text-red-500 mr-2"></i> <strong>Kiến Xây:</strong> 28 Bạch Đằng, Dương Đông</li>
                        <li><i class="fas fa-map-pin text-red-500 mr-2"></i> <strong>Thanh Hùng:</strong> 77 Đường 30/4 (Nổi tiếng thêm thịt bò)</li>
                        <li><i class="fas fa-map-pin text-red-500 mr-2"></i> <strong>Bình Dung:</strong> 10 Hùng Vương</li>
                    </ul>
                </div>
                
                <!-- Nutrition Card -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-green-500 mt-8">
                    <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-leaf text-green-500 mr-2"></i> <span>Giá trị dinh dưỡng</span>
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <i class="fas fa-fire text-orange-500 mb-1"></i>
                            <p class="text-xs text-gray-500 uppercase">Calo</p>
                            <p class="font-bold text-lg">~450 kcal</p>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <i class="fas fa-dumbbell text-blue-500 mb-1"></i>
                            <p class="text-xs text-gray-500 uppercase">Đạm</p>
                            <p class="font-bold text-lg">25g</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <p class="text-sm font-bold text-gray-700 mb-1">Thành phần chính:</p>
                        <p class="text-sm text-gray-600">Mực tươi, Tôm, Chả cá, Bún gạo tươi</p>
                    </div>
                </div>
            </div>

            <!-- Right: 7. Sauce Mixing Minigame -->
            <div class="bg-white p-8 rounded-3xl shadow-xl border border-gray-100 fade-in-section" data-animation="zoom-in-scroll">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-playfair font-bold text-ocean-charcoal">Minigame: Pha Nước Chấm</h3>
                    <p class="text-gray-500 text-sm">Hãy tự tay pha bát nước chấm "thần thánh" theo tỷ lệ vàng!</p>
                </div>

                <!-- Visual Representation -->
                <div class="flex justify-center mb-8 relative">
                    <div id="sauce-bowl" class="w-40 h-40 rounded-full border-4 border-gray-300 shadow-inner flex items-center justify-center transition-colors duration-300 relative overflow-hidden" style="background-color: #f3f4f6;">
                        <span id="sauce-result-text" class="font-bold text-gray-400 text-sm">Chưa pha</span>
                        <!-- Liquid Reflection -->
                        <div class="absolute top-2 right-4 w-8 h-4 bg-white/40 rounded-full transform -rotate-45"></div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-red-500"><i class="fas fa-pepper-hot"></i> Ớt Xay</label>
                            <span id="chili-val" class="text-gray-500 text-sm">0%</span>
                        </div>
                        <input type="range" id="chili-slider" min="0" max="100" value="0" class="w-full accent-red-500">
                    </div>

                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-yellow-500"><i class="fas fa-lemon"></i> Tắc (Quất)</label>
                            <span id="kumquat-val" class="text-gray-500 text-sm">0%</span>
                        </div>
                        <input type="range" id="kumquat-slider" min="0" max="100" value="0" class="w-full accent-yellow-500">
                    </div>

                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-gray-400"><i class="fas fa-cube"></i> Đường/Muối</label>
                            <span id="sugar-val" class="text-gray-500 text-sm">0%</span>
                        </div>
                        <input type="range" id="sugar-slider" min="0" max="100" value="0" class="w-full accent-gray-400">
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <p id="feedback-msg" class="text-sm italic text-ocean-blue min-h-[20px]"></p>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-ocean-charcoal text-white py-12 mt-12 text-center">
        <div class="container mx-auto px-6">
            <h3 class="text-xl font-playfair font-bold mb-4 text-sand-gold">Phú Quốc Cuisine</h3>
            <div class="flex flex-wrap justify-center gap-6 mb-6 text-sm md:text-base font-medium">
                <a href="../index.html" class="text-gray-300 hover:text-sand-gold transition-colors uppercase tracking-wide block md:inline-block p-2">Trang Chủ</a>
                <a href="../index.html#menu" class="text-gray-300 hover:text-sand-gold transition-colors uppercase tracking-wide block md:inline-block p-2">Thực Đơn</a>
                <a href="../index.html#map-section" class="text-gray-300 hover:text-sand-gold transition-colors uppercase tracking-wide block md:inline-block p-2">Bản Đồ</a>
                <a href="../about.html" class="text-gray-300 hover:text-sand-gold transition-colors uppercase tracking-wide block md:inline-block p-2">Giới Thiệu</a>
                <!-- Contact Removed -->
            </div>
            <p class="text-sm opacity-70">&copy; 2025-2026 10C1 THPT An Thới</p>
        </div>
    </footer>
    
    <script src="../music.js"></script>
    <script>
        // Scroll Animation Logic (ADDED TO FIX INVISIBLE TEXT)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    const anim = entry.target.dataset.animation || 'fade-in-up';
                    entry.target.classList.add(`animate-${anim}`);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in-section').forEach(section => {
            observer.observe(section);
        });

        // Parallax script reuse
        window.addEventListener('scroll', () => {
            const parallaxBg = document.querySelector('.parallax-bg');
            if (parallaxBg) {
                const speed = 0.5;
                parallaxBg.style.transform = `translateY(${window.scrollY * speed}px)`;
            }
        });

        // 7. Minigame Logic
        const chiliSlider = document.getElementById('chili-slider');
        const kumquatSlider = document.getElementById('kumquat-slider');
        const sugarSlider = document.getElementById('sugar-slider');
        const bowl = document.getElementById('sauce-bowl');
        const resultText = document.getElementById('sauce-result-text');
        const feedback = document.getElementById('feedback-msg');

        function updateSauce() {
            const c = parseInt(chiliSlider.value);
            const k = parseInt(kumquatSlider.value);
            const s = parseInt(sugarSlider.value);

            // Update UI values
            document.getElementById('chili-val').innerText = c + '%';
            document.getElementById('kumquat-val').innerText = k + '%';
            document.getElementById('sugar-val').innerText = s + '%';

            // Mix Color Calculation (Simple approximation)
            // Chili adds Red, Kumquat adds Orange/Yellow, Sugar adds White/Lightness
            const r = Math.min(255, 240 + (c * 0.1)); // Base light grey -> Redish
            const g = Math.min(255, 240 - (c * 1.5) + (k * 1.5)); // Red reduces Green, Yellow adds Green
            const b = Math.min(255, 240 - (c * 1.5) - (k * 0.5)); // Reduce Blue

            // Opacity/Saturation logic based on amount
            const total = c + k + s;
            
            if (total < 10) {
                bowl.style.backgroundColor = '#f3f4f6';
                resultText.innerText = "Chưa pha";
                resultText.style.color = "#9ca3af";
                feedback.innerText = "Hãy thêm nguyên liệu!";
            } else {
                bowl.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
                resultText.innerText = "";
                
                // Feedback Logic
                if (c > 70) feedback.innerText = "Ái chà! Cay xé lưỡi rồi!";
                else if (k > 70) feedback.innerText = "Chua quá bạn ơi!";
                else if (c > 30 && c < 60 && k > 30 && k < 60 && s > 30) feedback.innerText = "Tuyệt vời! Tỷ lệ vàng!";
                else feedback.innerText = "Tiếp tục điều chỉnh nhé...";
            }
        }

        [chiliSlider, kumquatSlider, sugarSlider].forEach(input => {
            input.addEventListener('input', updateSauce);
        });
    </script>
</body>
</html>